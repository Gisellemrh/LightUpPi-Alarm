function readText(e){for(var r=new java.io.File(e),n=new java.lang.StringBuffer,a=new java.io.BufferedReader(new java.io.FileReader(r)),o="",i="";null!=(o=a.readLine());)n.append(o),n.append(java.lang.System.getProperty("line.separator"));return i+=n.toString()}function main(e){if(!e.length)return print("Usage: rhino preparse.js zoneFileDirectory [exemplarCities] > outputfile.json"),print('Ex. >>> rhino preparse.js olson_files "Asia/Tokyo, America/New_York, Europe/London" > major_cities.json'),void print("Ex. >>> rhino preparse.js olson_files > all_cities.json");var r=e[0],n=e[1];load("date.js"),load("../../src/json.js");var a=fleegix.date.timezone;a.loadingScheme=a.loadingSchemes.MANUAL_LOAD;for(var o=0;o<a.zoneFiles.length;o++){var i=a.zoneFiles[o],s=readText(r+"/"+i);a.parseZones(s)}var l={};if(n){n=n.replace(/ /g,"").split(",");for(var t={},p={},o=0;o<n.length;o++){var f=n[o];t[f]=a.zones[f]}for(var v in t)for(var d=t[v],o=0;o<d.length;o++){var g=d[o][1];p[g]=a.rules[g]}l.zones=t,l.rules=p}else l.zones=a.zones,l.rules=a.rules;l=fleegix.json.serialize(l),print(l)}main(arguments);
