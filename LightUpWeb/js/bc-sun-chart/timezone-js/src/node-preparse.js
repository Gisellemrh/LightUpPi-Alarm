(function(){function e(e){if(e.length<3)return console.log("Usage: node node-preparse.js zoneFileDirectory [exemplarCities] > outputfile.json"),console.log('Ex. >>> node node-preparse.js olson_files "Asia/Tokyo, America/New_York, Europe/London" > major_cities.json'),void console.log("Ex. >>> node node-preparse.js olson_files > all_cities.json");var s=e[2],i=e[3],l={},a=r.timezone;a.loadingScheme=a.loadingSchemes.MANUAL_LOAD,a.zoneFiles=o.readdirSync(s);for(var t=0;t<a.zoneFiles.length;t++){var c=a.zoneFiles[t];if(!n.test(c)){var f=o.readFileSync(s+"/"+c,"utf8");a.parseZones(f)}}if(i){i=i.replace(/ /g,"").split(",");for(var u={},g={},t=0;t<i.length;t++){var p=i[t];u[p]=a.zones[p]}for(var d in u)for(var v=u[d],t=0;t<v.length;t++){var z=v[t][1];g[z]=a.rules[z]}l.zones=u,l.rules=g}else l.zones=a.zones,l.rules=a.rules;console.log(JSON.stringify(l,function(e,o){return"number"==typeof o?o.toString():o}))}var o=require("fs"),r=require("./date"),n=new RegExp("README|Makefile|factory|(\\.+)","i");module.exports=e(process.argv)}).call(this);
